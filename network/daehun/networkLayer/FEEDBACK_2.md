# Network Layer 2번째 시간 FeedBack

---

## Interview


* Q) Network 계층의 주된 역할을 설명해주세요
    
    A) IP패킷을 통신부에서 수신부까지 Best-effort 방식으로 전달하는 것이 역할이다.

    > 잘 얘기주셨는데 `IP주소`, `라우팅` 같은 용어가 더 들어갔으면 좋았을 것 같습니다!!

    > 네트워크 계층의 주된 역할은 데이터를 발신지에서 수신지까지 전달하기 위해 IP주소같은 논리적 주소를 사용하여 라우팅하고 최적의 경로를 선택하여 패킷을 전달하는 것입니다. 이 계층은 일반적으로 **Best-effort 방식** 으로 동작하며, 오류 제어나 흐름 제어는 보장하지 않습니다.

    <br>
---

* Q) 네트워크 계층은 전송계층과 어떤 차이가 있죠
    
    A) 전송계층에서는 신뢰성과 연결성을 보장하는 TCP가 주된 프로토콜이지만 네트워크에서는 정보를 전송하는 IP패킷은 신뢰성과 연결성을 보장하지 못한다.

    > 전송계층은 `end-to-end` , 네트워크 계층은 `host-to-host` 같은 키워드 중심으로 얘기를 해주시면 좋을 것 같습니다!!! 또 둘의 차이점에서 신뢰성과 연결성을 보장하지 못한다고 했으니깐 `Best-effort` 가 나오는게 좋아보여요!!

    <br>
---

* Q) 전송계층에서는 신뢰를 보장하는 TCP가 있는데 네트워크 계층에서는 어떤 프로토콜?
    
    A) 주로 IP프로토콜을 사용한다

    > 맞지만 IP프로토콜에 대한 설명도 좀 붙이면 좋을 것 같아요

    > 네트워크 계층에서는 IP를 주로 사용합니다.  IP는 데이터를 패킷 단위로 분할하여 목적지까지 전달하는 역할을 하며, 라우팅 및 주소 지정을 담당합니다.


    <br>
---

* Q) 네트워크의 데이터 단위는?
    
    A) bit나 byte를 사용 -> fragment를 사용한다.

    > 여기서 물어본 네트워크의 데이터 단위는 OSI 7계층에서 사용하는 PDU를 의도하고 물어본것으로 추정이 됩니다. 네트워크 계층에서 사용되는 데이터 단위는 패킷!!입니다. 이 패킷이 전송될때 필요시에 분할되는 과정이 `fragment`니깐 잘 정리해두시면 될 것 같습니다.

    > 응용계층, 표현계층, 세션계층 : Data
    
    > 전송계층 : 세그먼트(TCP), 데이터그램(UDP)
    
    > 네트워크 계층 : 패킷

    > 데이터링크 계층 : 프레임

    > 물리 계층 : bit 


    <br>
---

* Q) 제어평면, 데이터 평면 차이
    
    A) Controlplane 어디로 보낼지 결정하고 Data plane은 패킷이 들어왔을 때 다음 목적지를 어디로 갈 것인지 데이터를 보내준다.

    > ControlPlane이 어디로 보낼지 결정할때 `라우팅 프로토콜` 을 사용하고, DataPlane에서는 `패킷포워딩` 이 들어가면 좋을 것 같아요!


    <br>
---

* Q) 둘의 속도차이는?
    
    A) 데이터 평면이 빠르다

    > 왜 빠를까요? <br> `Data Plane은 이미 계산된 라우팅 테이블을 기반으로 단순하게 패킷 포워딩만 하기에 빠르다` 라고 같이 언급해주시면 좋을 것 같아요


    <br>
---

* Q) IPv4와 6의 차이
    
    A) IPv4의 IP가 부족해서 IPv6가 나왔다. 
    
    IP프로토콜을 구성하는 데이터 크기도 많이 다르다.

    > 이것도 좀 자세하게 IPv4에서는 32비트 주소체계, IPv6에서는 128비트 주소체계를 사용해서 주소 부족 문제를 해결했고, 주소표기방식은 4버전에서는 10진수 4개, 6버전에서는 16진수 8개 그룹으로 한다 요정도로 말씀하시면 좋을 것 같아요


    <br>
---

* Q) 둘다 브로드캐스트를 지원하나요?
    
    A) IPv4는 지원하는데 IPv6에 대해서는 잘 모르겠다.

    > 저도 몰라서 찾아봤는데 v6에서는 지원하지 않는다고 합니다!! <br> 대신에는 멀티캐스트와 애니캐스트를 사용하는데 그 이유는 브로드캐스트는 불필요한 트래픽 증가를 유발하고, 보안과 성능 측면에서 비효율적이기 때문이라고 합니다!! <br> 
    애니캐스트는 하나의 IP주소를 여러 노드에 할당하고, 가장 가까운 노드로 요청을 전달하는 방식이라고 합니다! <br>
    애니캐스트가 브로드캐스트를 완전 대체하는건 아니라고 하니 한 번 공부해보시는게 좋을 것 같습니다!

    <br>
---

* Q) LinkState와 DistanceVector의 차이
    
    A) LinkState에서는 각 라우터가 ls db를 가지고 토폴로지를 알고 라우팅 방식을 결정하고, DistanceVector는 이웃한 라우터들의 정보를 순차적으로 넘겨받아서 목적지를 찾는다.

    > 잘 정리해주셨습니다! 경로 계산 방식에 LinkState는 `OSPF`, Distance Vector는 `RIP` 이런것도 말씀해주시면 좋아보여요

* Q) 둘 중에 뭐가 더 빠를까요

    A) Link State 는 다익스트라 알고리즘으로 노드의 개수의 3승이고, Distance Vector는 많이 느린거로 알고 있다.

    > LinkState에서 사용하는 다익스트라 알고리즘은 O(n^2) 또는 O(n log n) 이라서 저 답변은 틀렸습니다,,ㅠㅠ <br> Distance Vector는 보통 노드와 링크수를 곱한 O(n * e) 라고 말씀하시면 됩니다!

    > 수렴 속도 측면에서는 Link State가 훨씬 빠릅니다. <br>LS는 전체 토폴로지를 바탕으로 직접 계산하고 빠르게 수렴하지, Distance Vector는 이웃을 통해 정보를 받아 느리게 수렴하고 루프 문제도 생길 수 있습니다.


    <br>
---

* Q) DV에서는 뭘써요?
    
    A) Bellman-Ford를 쓴다.

    > 요것도 위에 말씀드린 것 처럼 문제점도 같이 얘기하면 좋지 않을까... 합니다!

* Q) Bellman-Ford를 사용하는 프로토콜의 예시는요?
    
    A) 대답 못함

    > 요 부분은 위에서 말씀드린것처럼 `RIP(Routing Information Protocol)` 말씀해주시면 될 것 같습니다. <br> 알고보니깐 초창기에는 많이 쓰였는데 현대에는 OSPF나 EIGRP처럼 더 빠르고 안정적인 프로토콜이 선호된다고 하네요!!


    <br>
---

* Q) 라우터에서 패킷의 처리 방법?
    
    A) 패킷이 입력링크로 들어오게 되면 라우터테이블을 참고해서 그 다음 출력 링크로 데이터를 보내게 된다. 출력 링크의 MTU보다 받은게 더 크면 단편화를 해서 보낸다.

    > 잘 대답해주신 것 같습니다!!

* Q) 패킷을 수신하고 전송하는 일련의 과정을 자세하게 설명해주세요
    A) 라우팅 테이블을 검색하는 과정이 있습니다.

    > 라우터 내부에서 패킷이 실제로 어떻게 처리되는지 자세하게 설명을 해달라고 하신것 같아요!! <br>
    <br>`입력 포트 수신`<br>
    패킷이 물리적인 입력 포트를 통해 라우터에 도착해서 링크 계층 처리를 수행하고, 패킷을 메모리에 저장.
    <br><br>`헤더 분석 및 라우팅 결정`<br>
    패킷의 IP 헤더에서 목적지 IP 주소를 추출, 이 주소를 기준으로 라우팅 테이블 또는 포워딩 테이블을 참조하여 다음 홉과 출력 포트를 결정
    <br><br>`(필요 시) 패킷 단편화`<br>
    패킷의 크기가 출력 포트의 MTU보다 크다면, 단편화
    <br> 이것도  IPv6에서는 발신지에서만 단편화가 되고 라우터는 하지 않는다고 합니다!!
    <br><br>`출력 큐 저장 및 전송`<br>
    출력 포트가 당장 가용이 안된다면 패킷은 큐에 저장되는데 이 때 큐가 가득 차있다면 드롭 또는 지연이 발생하고, 최종적으로 출력 포트를 통해 다음 라우터 또는 목적지로 전송됩니다!!


    <br>
---

* Q) 최장 프리픽스 아시나요? 왜 사용할까요?
    A) 라우팅 테이블에 적혀있는 네트워크 주소를 패킷이 들어왔을 때 프리픽스를 비교해서 가장 길게 일치하는 곳으로 전송하는방식이다.

    > 잘 대답해주셨습니다!! 왜 사용하는지에 대한 대답으로는 IP주소가 계층적이고, 서브넷 구조를 가지므로, 더 길고 구체적인 프리픽스가 더 정확한 경로 정보를 제공하기 때문입니다!!


    <br>
---

