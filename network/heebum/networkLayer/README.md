# 🌐 Network Layer (네트워크 계층)

## 1. 개요
- **역할**: 송신 호스트에서 수신 호스트까지 **패킷(데이터그램)**을 전달
- **서비스 모델**: Best-Effort Delivery (전달, 순서, 지연, 대역폭 보장 없음)

---

## 2. 데이터 평면 ?? vs 제어 평면 ??
| 구분 | 데이터 평면 (Forwarding) | 제어 평면 (Routing) |
|------|----------------------|----------------------|
| 기능 | 패킷을 어느 포트로 보낼지 결정 | 네트워크 경로 계산 및 포워딩 테이블 설정 |
| 동작 위치 | 라우터 내부 하드웨어/ASIC | 라우팅 프로세서(SW) |
| SDN 관점 | 플로우 테이블 기반 포워딩 | 중앙 컨트롤러가 경로/정책 계산 후 배포 |

---

## 3. 라우터 내부 구조
1. **입력 포트**: L1/L2 처리 → 포워딩 테이블 조회(최장 프리픽스 일치)
2. **스위치 구조(Fabric)**: 입력 포트 ↔ 출력 포트 연결 (메모리, 버스, 크로스바 등)
3. **출력 포트**: 큐잉·스케줄링 후 전송
4. **라우팅 프로세서**: 라우팅 프로토콜 실행, 테이블 관리 (또는 SDN 컨트롤러 연동)

---

## 4. IP 주소 체계
- **IPv4 데이터그램**: 버전, 길이, TTL, 프로토콜, 출발지/목적지 IP
- **주소 단위** device가 아닌 interface 별로 부여
- **CIDR**: a.b.c.d/x (프리픽스 길이 기반 주소 집계)
- **DHCP**: IP, 서브넷 마스크, 게이트웨이, DNS를 동적 임대
- **브로드캐스트**: 255.255.255.255 (동일 서브넷 전체)

---

## 5. NAT (Network Address Translation)
- **목적**: 공인 IP 주소를 절약하고, 내부 네트워크 구조를 외부에 숨기며 보안을 강화
- **어디에 쓰임 ??**
    - 가정용/사무실 공유기에서 다수의 기기가 하나의 공인 IP로 인터넷에 접속할 때
    - 클라우드 환경에서 사설 네트워크 인스턴스가 외부와 통신할 때
    - 기업 방화벽에서 내부망 보호를 위해
- **동작 방식**: 사설 IP ↔ 공인 IP:Port 매핑
- **장점**:
    - IPv4 주소 절약
    - 내부망 구조 은닉으로 보안성 향상
- **단점**:
    - 인바운드 연결/서버 운영 시 불편 (포트포워딩, NAT 트래버설 필요)

## SSAFY에도 NAT가 쓰일까 ?

### 1) 공인 IP 절약
- SSAFY 캠퍼스에는 수백 대의 PC, 노트북, 개발 보드 등이 있음.
- 모든 장비에 공인 IP를 부여하면 IPv4 주소가 크게 소모됨.
- NAT를 통해 **여러 장비 → 하나(또는 소수)의 공인 IP**로 인터넷 접속 가능.

### 2) 보안 강화
- 교육장 내부 장비는 외부에서 직접 접근할 필요가 거의 없음.
- NAT를 사용하면 외부에서 내부망으로 바로 접근이 불가능해져 보안성 향상.

### 3) 네트워크 관리 효율성
- 내부 IP 대역(예: 10.x.x.x, 192.168.x.x)을 사설망으로 통일.
- 장비 교체나 IP 변경 시 외부 네트워크에 영향 없음.
- 라우터/방화벽 장비에서 NAT를 통합 관리 가능.

### 4) 방화벽과 NAT의 결합
- 대부분의 네트워크 장비는 **NAT + 방화벽** 기능을 함께 제공.
- NAT 정책과 방화벽 규칙을 결합해 네트워크 보안을 통합적으로 관리 가능.



---

## 6. IPv4 vs IPv6
| 항목 | IPv4 | IPv6 |
|------|------|------|
| 주소 길이 | 32bit | 128bit |
| 헤더 | 가변 길이 | 고정 40바이트 + 확장 헤더 |
| 단편화 | 라우터/끝점 | 끝점만 수행 |
| 체크섬 | 있음 | 없음 |
| 주소 유형 | 유니/멀티캐스트 | 유니/멀티/애니캐스트 |
| 전환 방식 | — | 듀얼스택, 터널링 |

---

## 7. 큐잉 & 스케줄링
- **입력 큐**: 스위치 구조 병목 시 대기, HOL 차단 가능
- **출력 큐**: 다수 입력 → 동일 출력 시 혼잡/드롭
- **스케줄링**:
    - FIFO
    - 우선순위 큐
    - 라운드 로빈, WFQ
- **버퍼블로트**: 버퍼 과대 → 지연 증가

---

## 8. 라우팅 알고리즘
- **Link State (LS)**: 전역 토폴로지 기반, Dijkstra 사용
- **Distance Vector (DV)**: 인접 노드와 거리 정보 교환, 단순하지만 수렴 느림
- **Hierarchical Routing**: AS 단위 계층화, 주소 집계로 테이블 축소

---

## 9. 인터넷 라우팅 프로토콜
- **RIP (DV)**: 홉 수 기반, 단순하지만 확장성/속도 한계
- **OSPF (LS)**: 링크 비용 기반, 빠른 수렴, Area 구조
- **BGP (Path Vector)**: AS 간 정책 기반, 글로벌 라우팅 표준

---

## 10. SDN · OpenFlow
- **매치 → 액션** 모델
- 플로우 테이블 기반 패킷 처리
- 컨트롤러에서 네트워크 정책 중앙 관리

---





# 💬 네트워크 계층 면접 예상 질문 (10개 + 꼬리질문 ~?)

## 1. 네트워크 계층의 역할
- **질문**: 네트워크 계층의 주된 역할은 무엇인가요?
- **꼬리질문**: 전송 계층과 네트워크 계층의 차이는 무엇인가요?

---

## 2. 데이터 평면과 제어 평면
- **질문**: 데이터 평면과 제어 평면의 차이를 설명해주세요.
- **꼬리질문**: SDN 환경에서 제어 평면의 장점은 무엇인가요?

---

## 3. 라우터 내부 동작
- **질문**: 라우터가 패킷을 처리하는 과정을 설명해주세요.
- **꼬리질문**: ‘최장 프리픽스 일치’가 왜 중요한가요?

---

## 4. NAT
- **질문**: NAT의 장단점을 설명해주세요.
- **꼬리질문**: NAT 환경에서 서버를 운영하려면 어떤 설정이 필요할까요?

---

## 5. IPv4 vs IPv6
- **질문**: IPv4와 IPv6의 주요 차이점은 무엇인가요?
- **꼬리질문**: IPv6로 완전히 전환되지 못한 이유는 무엇이라고 생각하나요?

---

## 6. 큐잉과 스케줄링
- **질문**: 네트워크 장비에서 큐잉이 필요한 이유는 무엇인가요?
- **꼬리질문**: HOL(Head-of-Line) 블로킹은 어떻게 해결할 수 있나요?

---

## 7. 라우팅 알고리즘
- **질문**: Link State와 Distance Vector의 차이를 설명해주세요.
- **꼬리질문**: Distance Vector에서 발생할 수 있는 ‘Count to Infinity’ 문제를 해결하는 방법은?

---

## 8. 라우팅 프로토콜
- **질문**: OSPF와 BGP의 차이는 무엇인가요?
- **꼬리질문**: BGP가 ‘정책 기반 라우팅’이라고 불리는 이유는 무엇인가요?

---

## 9. SDN
- **질문**: SDN의 구조와 장점을 설명해주세요.
- **꼬리질문**: OpenFlow에서 매치 조건으로 어떤 필드를 사용할 수 있나요?

---

## 10. 미들박스
- **질문**: 미들박스의 역할과 단점을 설명해주세요.
- **꼬리질문**: HTTPS 트래픽을 DPI로 검사하려면 어떤 기술이 필요할까요?
